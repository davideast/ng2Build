{"version":3,"file":"/Users/deast/Angular/angular/modules/change_detection/test/keyvalue_changes_spec.js","sources":["@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","keyvalue_changes_spec.js","@traceur/generated/TemplateParser/22","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9"],"names":[],"mappings":"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","sourceRoot":"/Users/deast/Angular/angular/modules/change_detection/test/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","import {describe, it, iit, xit, expect, beforeEach, afterEach} from 'test_lib/test_lib';\nimport {KeyValueChanges} from 'change_detection/keyvalue_changes';\nimport {NumberWrapper, isJsObject} from 'facade/lang';\nimport {MapWrapper} from 'facade/collection';\nimport {kvChangesAsString} from './util';\n\n// todo(vicb): Update the code & tests for object equality\nexport function main() {\n  describe('keyvalue_changes', function() {\n    describe('KeyValueChanges', function() {\n      var changes;\n      var m;\n\n      beforeEach(() => {\n        changes = new KeyValueChanges();\n        m = MapWrapper.create();\n      });\n\n      afterEach(() => {\n        changes = null;\n      });\n\n      it('should detect additions', () => {\n        changes.check(m);\n\n        MapWrapper.set(m, 'a', 1);\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a[null->1]'],\n          additions: ['a[null->1]']\n        }));\n\n        MapWrapper.set(m, 'b', 2);\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a', 'b[null->2]'],\n          previous: ['a'],\n          additions: ['b[null->2]']\n        }));\n      });\n\n      it('should handle changing key/values correctly', () => {\n        MapWrapper.set(m, 1, 10);\n        MapWrapper.set(m, 2, 20);\n        changes.check(m);\n\n        MapWrapper.set(m, 2, 10);\n        MapWrapper.set(m, 1, 20);\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['1[10->20]', '2[20->10]'],\n          previous: ['1[10->20]', '2[20->10]'],\n          changes: ['1[10->20]', '2[20->10]']\n        }));\n      });\n\n      it('should do basic map watching', () => {\n        changes.check(m);\n\n        MapWrapper.set(m, 'a', 'A');\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a[null->A]'],\n          additions: ['a[null->A]']\n        }));\n\n        MapWrapper.set(m, 'b', 'B');\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a', 'b[null->B]'],\n          previous: ['a'],\n          additions: ['b[null->B]']\n        }));\n\n        MapWrapper.set(m, 'b', 'BB');\n        MapWrapper.set(m, 'd', 'D');\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a', 'b[B->BB]', 'd[null->D]'],\n          previous: ['a', 'b[B->BB]'],\n          additions: ['d[null->D]'],\n          changes: ['b[B->BB]']\n        }));\n\n        MapWrapper.delete(m, 'b');\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['a', 'd'],\n          previous: ['a', 'b[BB->null]', 'd'],\n          removals: ['b[BB->null]']\n        }));\n\n        MapWrapper.clear(m);\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          previous: ['a[A->null]', 'd[D->null]'],\n          removals: ['a[A->null]', 'd[D->null]']\n        }));\n      });\n\n      it('should test string by value rather than by reference (DART)', () => {\n        MapWrapper.set(m, 'foo', 'bar');\n        changes.check(m);\n\n        var f = 'f';\n        var oo = 'oo';\n        var b = 'b';\n        var ar = 'ar';\n\n        MapWrapper.set(m, f + oo, b + ar);\n        changes.check(m);\n\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['foo'],\n          previous: ['foo']\n        }));\n      });\n\n      it('should not see a NaN value as a change (JS)', () => {\n        MapWrapper.set(m, 'foo', NumberWrapper.NaN);\n        changes.check(m);\n\n        changes.check(m);\n        expect(changes.toString()).toEqual(kvChangesAsString({\n          map: ['foo'],\n          previous: ['foo']\n        }));\n      });\n\n      // JS specific tests (JS Objects)\n      if (isJsObject({})) {\n        describe('JsObject changes', () => {\n          it('should support JS Object', () => {\n            expect(KeyValueChanges.supports({})).toBeTruthy();\n            expect(KeyValueChanges.supports(\"not supported\")).toBeFalsy();\n            expect(KeyValueChanges.supports(0)).toBeFalsy();\n            expect(KeyValueChanges.supports(null)).toBeFalsy();\n          });\n\n          it('should do basic object watching', () => {\n            m = {};\n            changes.check(m);\n\n            m['a'] = 'A';\n            changes.check(m);\n            expect(changes.toString()).toEqual(kvChangesAsString({\n              map: ['a[null->A]'],\n              additions: ['a[null->A]']\n            }));\n\n            m['b'] = 'B';\n            changes.check(m);\n            expect(changes.toString()).toEqual(kvChangesAsString({\n              map: ['a', 'b[null->B]'],\n              previous: ['a'],\n              additions: ['b[null->B]']\n            }));\n\n            m['b'] = 'BB';\n            m['d'] = 'D';\n            changes.check(m);\n            expect(changes.toString()).toEqual(kvChangesAsString({\n              map: ['a', 'b[B->BB]', 'd[null->D]'],\n              previous: ['a', 'b[B->BB]'],\n              additions: ['d[null->D]'],\n              changes: ['b[B->BB]']\n            }));\n\n            m = {};\n            m['a'] = 'A';\n            m['d'] = 'D';\n            changes.check(m);\n            expect(changes.toString()).toEqual(kvChangesAsString({\n              map: ['a', 'd'],\n              previous: ['a', 'b[BB->null]', 'd'],\n              removals: ['b[BB->null]']\n            }));\n\n            m = {};\n            changes.check(m);\n            expect(changes.toString()).toEqual(kvChangesAsString({\n              previous: ['a[A->null]', 'd[D->null]'],\n              removals: ['a[A->null]', 'd[D->null]']\n            }));\n          });\n        });\n      }\n    });\n  });\n}\n","\n        $__export($__placeholder__0, $__placeholder__1)\n      ","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function(m) {\n          $__placeholder__0\n        }","$__placeholder__0 = m.$__placeholder__1;"]}