{"version":3,"file":"/Users/deast/Angular/angular/modules/core/src/compiler/directive_metadata_reader.js","sources":["@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/14","directive_metadata_reader.js","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourceRoot":"/Users/deast/Angular/angular/modules/core/src/compiler/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function(m) {\n          $__placeholder__0\n        }","$__placeholder__0 = m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","import {Type, isPresent, BaseException, stringify} from 'facade/lang';\nimport {List, ListWrapper} from 'facade/collection';\nimport {Directive, Component} from '../annotations/annotations';\nimport {DirectiveMetadata} from './directive_metadata';\nimport {reflector} from 'reflection/reflection';\nimport {ShadowDom, ShadowDomStrategy, ShadowDomNative} from './shadow_dom';\n\nexport class DirectiveMetadataReader {\n  read(type:Type):DirectiveMetadata {\n    var annotations = reflector.annotations(type);\n    if (isPresent(annotations)) {\n      for (var i=0; i<annotations.length; i++) {\n        var annotation = annotations[i];\n\n        if (annotation instanceof Component) {\n          var shadowDomStrategy = this.parseShadowDomStrategy(annotation);\n          return new DirectiveMetadata(\n            type,\n            annotation,\n            shadowDomStrategy,\n            this.componentDirectivesMetadata(annotation, shadowDomStrategy)\n          );\n        }\n\n        if (annotation instanceof Directive) {\n          return new DirectiveMetadata(type, annotation, null, null);\n        }\n      }\n    }\n    throw new BaseException(`No Directive annotation found on ${stringify(type)}`);\n  }\n\n  parseShadowDomStrategy(annotation:Component):ShadowDomStrategy{\n    return isPresent(annotation.shadowDom) ? annotation.shadowDom : ShadowDomNative;\n  }\n\n  componentDirectivesMetadata(annotation:Component, shadowDomStrategy:ShadowDomStrategy):List<Type> {\n    var polyDirs = shadowDomStrategy.polyfillDirectives();\n    var template = annotation.template;\n    var templateDirs = isPresent(template) && isPresent(template.directives) ? template.directives : [];\n\n    var res = [];\n    res = ListWrapper.concat(res, templateDirs)\n    res = ListWrapper.concat(res, polyDirs)\n\n    return res;\n  }\n}\n","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}