{"version":3,"file":"/Users/deast/Angular/angular/modules/core/src/compiler/shadow_dom_emulation/light_dom.js","sources":["@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","light_dom.js","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourceRoot":"/Users/deast/Angular/angular/modules/core/src/compiler/shadow_dom_emulation/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","import {Element, Node, DOM} from 'facade/dom';\nimport {List, ListWrapper} from 'facade/collection';\nimport {isBlank, isPresent} from 'facade/lang';\n\nimport {View} from '../view';\nimport {ElementInjector} from '../element_injector';\nimport {ViewPort} from '../viewport';\nimport {Content} from './content_tag';\n\nexport class SourceLightDom {}\nexport class DestinationLightDom {}\n\n// TODO: LightDom should implement SourceLightDom and DestinationLightDom\n// once interfaces are supported\nexport class LightDom {\n  lightDomView:View;\n  shadowDomView:View;\n  roots:List<Node>;\n\n  constructor(lightDomView:View, shadowDomView:View, element:Element) {\n    this.lightDomView = lightDomView;\n    this.shadowDomView = shadowDomView;\n    this.roots = DOM.childNodesAsList(element);\n    DOM.clearNodes(element);\n  }\n\n  redistribute() {\n    redistributeNodes(this.contentTags(), this.expandedDomNodes());\n  }\n\n  contentTags(): List<Content> {\n    return this._collectAllContentTags(this.shadowDomView, []);\n  }\n\n  _collectAllContentTags(item, acc:List<Content>):List<Content> {\n    ListWrapper.forEach(item.elementInjectors, (ei) => {\n      if (ei.hasDirective(Content)) {\n        ListWrapper.push(acc, ei.get(Content));\n\n      } else if (ei.hasPreBuiltObject(ViewPort)) {\n        var vp = ei.get(ViewPort);\n        ListWrapper.forEach(vp.contentTagContainers(), (c) => {\n          this._collectAllContentTags(c, acc);\n        });\n      }\n    });\n    return acc;\n  }\n\n  expandedDomNodes():List {\n    var res = [];\n    ListWrapper.forEach(this.roots, (root) => {\n      // TODO: vsavkin calculcate this info statically when creating light dom\n      var viewPort = this.lightDomView.getViewPortByTemplateElement(root);\n      if (isPresent(viewPort)) {\n        res = ListWrapper.concat(res, viewPort.nodes());\n      } else {\n        ListWrapper.push(res, root);\n      }\n    });\n    return res;\n  }\n}\n\nfunction redistributeNodes(contents:List<Content>, nodes:List<Node>) {\n  for (var i = 0; i < contents.length; ++i) {\n    var content = contents[i];\n    var select = content.select;\n    var matchSelector = (n) => DOM.elementMatches(n, select);\n\n    if (isBlank(select)) {\n      content.insert(nodes);\n      ListWrapper.clear(nodes);\n\n    } else {\n      var matchingNodes = ListWrapper.filter(nodes, matchSelector);\n      content.insert(matchingNodes);\n      ListWrapper.removeAll(nodes, matchingNodes);\n    }\n  }\n}\n","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function(m) {\n          $__placeholder__0\n        }","$__placeholder__0 = m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});"]}