{"version":3,"file":"/Users/deast/Angular/angular/modules/directives/src/ng_repeat.js","sources":["@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/20","ng_repeat.js","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/14"],"names":[],"mappings":"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","sourceRoot":"/Users/deast/Angular/angular/modules/directives/src/","sourcesContent":["System.register($__placeholder__0, $__placeholder__1, function($__export) {\n          $__placeholder__2\n        });","var __moduleName = $__placeholder__0;","return {\n      setters: $__placeholder__0,\n      execute: $__placeholder__1\n    }","function(m) {\n          $__placeholder__0\n        }","$__placeholder__0 = m.$__placeholder__1;","var $__placeholder__0 = $__export($__placeholder__1, $__placeholder__2);","function($__super) {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4, $__super);\n        }($__placeholder__5)","import {Template} from 'core/annotations/annotations';\nimport {OnChange} from 'core/compiler/interfaces';\nimport {ViewPort} from 'core/compiler/viewport';\nimport {View} from 'core/compiler/view';\nimport {isPresent, isBlank} from 'facade/lang';\nimport {ListWrapper} from 'facade/collection';\n\n@Template({\n  selector: '[ng-repeat]',\n  bind: {\n    'in': 'iterable[]'\n  }\n})\nexport class NgRepeat extends OnChange {\n  viewPort: ViewPort;\n  iterable;\n  constructor(viewPort: ViewPort) {\n    this.viewPort = viewPort;\n  }\n  onChange(changes) {\n    var iteratorChanges = changes['iterable'];\n    if (isBlank(iteratorChanges) || isBlank(iteratorChanges.currentValue)) {\n      this.viewPort.clear();\n      return;\n    }\n\n    // TODO(rado): check if change detection can produce a change record that is\n    // easier to consume than current.\n    var recordViewTuples = [];\n    iteratorChanges.currentValue.forEachRemovedItem(\n      (removedRecord) => ListWrapper.push(recordViewTuples, new RecordViewTuple(removedRecord, null))\n    );\n\n    iteratorChanges.currentValue.forEachMovedItem(\n      (movedRecord) => ListWrapper.push(recordViewTuples, new RecordViewTuple(movedRecord, null))\n    );\n\n    var insertTuples = NgRepeat.bulkRemove(recordViewTuples, this.viewPort);\n\n    iteratorChanges.currentValue.forEachAddedItem(\n      (addedRecord) => ListWrapper.push(insertTuples, new RecordViewTuple(addedRecord, null))\n    );\n\n    NgRepeat.bulkInsert(insertTuples, this.viewPort);\n\n    for (var i = 0; i < insertTuples.length; i++) {\n      this.perViewChange(insertTuples[i].view, insertTuples[i].record);\n    }\n  }\n\n  perViewChange(view, record) {\n    view.setLocal('ng-repeat', record.item);\n    // Uncomment when binding is ready.\n    // view.setLocal('index', record.item);\n  }\n\n  static bulkRemove(tuples, viewPort) {\n    tuples.sort((a, b) => a.record.previousIndex - b.record.previousIndex);\n    var movedTuples = [];\n    for (var i = tuples.length - 1; i >= 0; i--) {\n      var tuple = tuples[i];\n      var view = viewPort.remove(tuple.record.previousIndex);\n      if (isPresent(tuple.record.currentIndex)) {\n        tuple.view = view;\n        ListWrapper.push(movedTuples, tuple);\n      }\n    }\n    return movedTuples;\n  }\n\n  static bulkInsert(tuples, viewPort) {\n    tuples.sort((a, b) => a.record.currentIndex - b.record.currentIndex);\n    for (var i = 0; i < tuples.length; i++) {\n      var tuple = tuples[i];\n      if (isPresent(tuple.view)) {\n        viewPort.insert(tuple.view, tuple.record.currentIndex);\n      } else {\n        tuple.view = viewPort.create(tuple.record.currentIndex);\n      }\n    }\n    return tuples;\n  }\n}\n\nclass RecordViewTuple {\n  view: View;\n  record: any;\n  constructor(record, view) {\n    this.record = record;\n    this.view = view;\n  }\n}\n","Object.defineProperty($__placeholder__0, $__placeholder__1,\n        {get: function() {return $__placeholder__2}});","$__placeholder__0 = $__placeholder__1","function() {\n          var $__placeholder__0 = $__placeholder__1;\n          return ($traceurRuntime.createClass)($__placeholder__2, $__placeholder__3,\n                                               $__placeholder__4);\n        }()"]}